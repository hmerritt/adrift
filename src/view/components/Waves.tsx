import { useState } from "react";
import { css, cx } from "@linaria/core";

import theme from "lib/styles";
import { useInterval } from "lib/hooks";

export const Waves = ({ animate = true, ...props }) => {
	const [waveState, setWaveState] = useState(0);

	useInterval(() => {
		if (!animate) return;
		setWaveState((waveState + 1) % waveStates.length);
	}, 1000);

	return (
		<div className={waveContainer}>
			<div>
				<svg
					className={wave}
					viewBox="0 0 1440 320"
					xmlns="http://www.w3.org/2000/svg"
				>
					<path fill="#d0ecff" fillOpacity="1" d={waveStates[waveState]} />
				</svg>
			</div>
			<div className={waveFill}></div>
		</div>
	);
};

const waveContainer = css`
	position: fixed;
	top: 0;
	bottom: 0;
	left: 0;
	right: 0;
	z-index: -10;
	display: flex;
	flex-direction: column;
	justify-content: flex-end;

	& > div {
		flex-shrink: 1;
		width: 100%;
	}
`;

const wave = css`
	width: 100%;
	height: auto;

	path {
		transform-origin: 0px 0px;
		transition: all 250ms ease 0s;
	}
`;

const waveFill = css`
	width: 100%;
	height: 30vh;
	margin-top: -0.5rem;
	background-color: #d0ecff;
`;

const waveStates = [
	"M0,96L40,101.3C80,107,160,117,240,144C320,171,400,213,480,208C560,203,640,149,720,122.7C800,96,880,96,960,101.3C1040,107,1120,117,1200,112C1280,107,1360,85,1400,74.7L1440,64L1440,320L1400,320C1360,320,1280,320,1200,320C1120,320,1040,320,960,320C880,320,800,320,720,320C640,320,560,320,480,320C400,320,320,320,240,320C160,320,80,320,40,320L0,320Z",
	"M0,32L30,58.7C60,85,120,139,180,181.3C240,224,300,256,360,261.3C420,267,480,245,540,213.3C600,181,660,139,720,117.3C780,96,840,96,900,80C960,64,1020,32,1080,48C1140,64,1200,128,1260,165.3C1320,203,1380,213,1410,218.7L1440,224L1440,320L1410,320C1380,320,1320,320,1260,320C1200,320,1140,320,1080,320C1020,320,960,320,900,320C840,320,780,320,720,320C660,320,600,320,540,320C480,320,420,320,360,320C300,320,240,320,180,320C120,320,60,320,30,320L0,320Z",
	"M0,96L26.7,112C53.3,128,107,160,160,192C213.3,224,267,256,320,250.7C373.3,245,427,203,480,170.7C533.3,139,587,117,640,112C693.3,107,747,117,800,149.3C853.3,181,907,235,960,256C1013.3,277,1067,267,1120,256C1173.3,245,1227,235,1280,208C1333.3,181,1387,139,1413,117.3L1440,96L1440,320L1413.3,320C1386.7,320,1333,320,1280,320C1226.7,320,1173,320,1120,320C1066.7,320,1013,320,960,320C906.7,320,853,320,800,320C746.7,320,693,320,640,320C586.7,320,533,320,480,320C426.7,320,373,320,320,320C266.7,320,213,320,160,320C106.7,320,53,320,27,320L0,320Z",
	"M0,192L24,186.7C48,181,96,171,144,181.3C192,192,240,224,288,197.3C336,171,384,85,432,69.3C480,53,528,107,576,138.7C624,171,672,181,720,176C768,171,816,149,864,165.3C912,181,960,235,1008,245.3C1056,256,1104,224,1152,197.3C1200,171,1248,149,1296,160C1344,171,1392,213,1416,234.7L1440,256L1440,320L1416,320C1392,320,1344,320,1296,320C1248,320,1200,320,1152,320C1104,320,1056,320,1008,320C960,320,912,320,864,320C816,320,768,320,720,320C672,320,624,320,576,320C528,320,480,320,432,320C384,320,336,320,288,320C240,320,192,320,144,320C96,320,48,320,24,320L0,320Z",
	"M0,256L18.5,256C36.9,256,74,256,111,261.3C147.7,267,185,277,222,277.3C258.5,277,295,267,332,240C369.2,213,406,171,443,160C480,149,517,171,554,202.7C590.8,235,628,277,665,261.3C701.5,245,738,171,775,165.3C812.3,160,849,224,886,250.7C923.1,277,960,267,997,229.3C1033.8,192,1071,128,1108,101.3C1144.6,75,1182,85,1218,106.7C1255.4,128,1292,160,1329,160C1366.2,160,1403,128,1422,112L1440,96L1440,320L1421.5,320C1403.1,320,1366,320,1329,320C1292.3,320,1255,320,1218,320C1181.5,320,1145,320,1108,320C1070.8,320,1034,320,997,320C960,320,923,320,886,320C849.2,320,812,320,775,320C738.5,320,702,320,665,320C627.7,320,591,320,554,320C516.9,320,480,320,443,320C406.2,320,369,320,332,320C295.4,320,258,320,222,320C184.6,320,148,320,111,320C73.8,320,37,320,18,320L0,320Z",
	"M0,224L21.8,229.3C43.6,235,87,245,131,245.3C174.5,245,218,235,262,197.3C305.5,160,349,96,393,74.7C436.4,53,480,75,524,96C567.3,117,611,139,655,138.7C698.2,139,742,117,785,96C829.1,75,873,53,916,69.3C960,85,1004,139,1047,144C1090.9,149,1135,107,1178,122.7C1221.8,139,1265,213,1309,250.7C1352.7,288,1396,288,1418,288L1440,288L1440,320L1418.2,320C1396.4,320,1353,320,1309,320C1265.5,320,1222,320,1178,320C1134.5,320,1091,320,1047,320C1003.6,320,960,320,916,320C872.7,320,829,320,785,320C741.8,320,698,320,655,320C610.9,320,567,320,524,320C480,320,436,320,393,320C349.1,320,305,320,262,320C218.2,320,175,320,131,320C87.3,320,44,320,22,320L0,320Z",
	"M0,224L30,240C60,256,120,288,180,288C240,288,300,256,360,240C420,224,480,224,540,218.7C600,213,660,203,720,186.7C780,171,840,149,900,128C960,107,1020,85,1080,69.3C1140,53,1200,43,1260,80C1320,117,1380,203,1410,245.3L1440,288L1440,320L1410,320C1380,320,1320,320,1260,320C1200,320,1140,320,1080,320C1020,320,960,320,900,320C840,320,780,320,720,320C660,320,600,320,540,320C480,320,420,320,360,320C300,320,240,320,180,320C120,320,60,320,30,320L0,320Z"
];
